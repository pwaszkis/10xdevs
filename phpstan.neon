includes:
    - ./vendor/larastan/larastan/extension.neon

parameters:
    paths:
        - app
        - config
        - database
        - routes
        - tests

    level: 6

    excludePaths:
        - ./*/*/FileToBeExcluded.php

    # Additional rules
    reportUnmatchedIgnoredErrors: true
    treatPhpDocTypesAsCertain: false

    ignoreErrors:
        # Livewire 3 attributes - PHPStan doesn't recognize them
        - '#Attribute class Livewire\\Attributes\\Prop does not exist#'

        # Eloquent relationship return type covariance issues - false positives
        - '#should return .+ but returns .+ \$this\(#'
        - '#Generic type .+ in PHPDoc tag @return does not specify all template types#'

        # Mockery - andThrow() method exists but PHPStan doesn't recognize it
        - '#Call to an undefined method Mockery\\ExpectationInterface\|Mockery\\HigherOrderMessage::andThrow\(\)#'

        # Mockery - MockInterface is compatible with mocked classes in tests
        - '#Parameter .* of class App\\Services\\AIGenerationService constructor expects App\\Services\\OpenAI\\OpenAIService, Mockery\\MockInterface given#'

        # Dusk - env() is acceptable in test cases (config not cached in tests)
        -
            message: "#Called 'env' outside of the config directory#"
            path: tests/DuskTestCase.php
